// npx sass --watch ./SCSS:./CSS
@import "./style";

#body {
    width: 100%;
    @include grid(4);
    justify-items: center;
    padding: 2rem $side-padding;
    gap: 2rem;
}

#main-content--top--sort input {
    
}

#filters {
    position: sticky;
    top: 6.5rem;
    height: fit-content;
    width: 100%;
    @include flex(column);
    grid-column: span 1;
    min-width: 0;
    
    >section {
        padding: 0;
        @include flex(column, 0);
        @extend %surface;
        border: $outline-width solid var(--detail-color);
        box-shadow: 0 $outline-width 0 var(--detail-color);

        &:has(form.open) {
            button i {
                rotate: 180deg;
            }
        }

        button {
            @include flex();
            width: 100%;
            justify-content: space-between;
            border-radius: 0;

            i {
                @include transition();
            }
        }

        form {
            @include transition(all, $transition-duration-smooth);
            @include flex(column, 0.25rem);
            overflow: hidden;
            max-height: 0;
            padding: 0 1rem 0 1rem;

            &.open {
                flex: 1;
                max-height: none;
                padding: 0 1rem 1rem 1rem;
            }
        }

        .filter--preview {
            @include transition(all, $transition-duration-smooth);
            font-size: small;
            @include flex(row, 0.5rem);
            flex-wrap: wrap;
            list-style: none;
            color: var(--secondary-color);
            overflow: hidden;
            padding: 0 1rem 0 1rem;

            &.open:has(li:not([style*="display: none"])) {
                padding: 0 1rem 1rem 1rem;
            }

            li {
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
                max-width: 40%;
                padding: 0.25rem 0.5rem;
                background-color: color-mix(in srgb, var(--secondary-color), transparent 75%);
                border-radius: 100rem;

                &:hover {
                    cursor: pointer;
                    text-decoration: underline;
                }
            }
        }
    }
}

#main-content {
    grid-column: span 3;
    width: 100%;

    &--top {
        @include flex();
        justify-content: space-between;
        align-items: center;

        search {
            max-width: 50%;
        }

        &--sort label {
            margin-right: 0.5rem;
        }
    }
}

#main-content--grid {
    margin-top: 1rem;
    @include responsive-grid(30%, 4, 6);
    
    .cover {
        padding: 0;
        background-size: cover;
        position: relative;

        &::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(8px);
            border-radius: 8px;
            z-index: 1;
        }
        
        img {
            position: absolute;
            object-fit: contain;
            width: 100%;
            height: 100%;
            z-index: 2;
        }
    }
    
    &.loading {
        @include transition(opacity, $transition-duration-instant/2);
        opacity: 50%;
    }
}

#main-content--pages {
    @include flex(row, 0);
    justify-content: center;
    margin-top: 1rem;

    button {
        max-width: 2.5rem;
        height: 2.5rem;
        &.disabled{
            opacity: 50%;
    
            &:hover {
                cursor: default;
                background-color: transparent;
            }
        }

        &.current {
            color: var(--secondary-color);
            border: $outline-width solid var(--detail-color);

            &:hover {
                cursor: default;
                background-color: transparent;
            }
        }
    }

}
